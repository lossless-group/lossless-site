---
import Layout from '@layouts/Layout.astro';
import Hero from '@components/basics/Hero.astro';
import AnimationWrapper from '@components/basics/AnimationWrapper.astro';
import ProjectGallery from '@components/projects/ProjectGallery.svelte';
import ContentSection_SidebarTreeVariantB from '@layouts/content-sections/ContentSection_SidebarTreeVariantB.astro';
import OneArticle from '@layouts/OneArticle.astro';
import OneArticleOnPage from '@components/articles/OneArticleOnPage.astro';
import Tooltip from '@components/basics/tooltips/Tooltip.astro';
import ExpandIcon from '@assets/Icons/arrows-maximize.svg';
import CollapseIcon from '@assets/Icons/arrows-minimize.svg';

import mdWorkflow from '@generated/projects/Augment-It/Specs/Data Augmentation Workflow with Microfrontends.md?raw';

// Demo steps for Augment-It project
const demoSteps = [
  { 
    title: 'Data Augmentation Workflow with Microfrontends', 
    href: '/projects/augment-it',
    type: 'orientation',
    description: 'Overview and introduction to the complete workflow'
  },
  { 
    title: 'Load Data', 
    href: '/projects/augment-it/record-collector',
    type: 'sequential',
    step: 1
  },
  { 
    title: 'Review & Enrich Records', 
    href: '/projects/augment-it/review-enrich-records',
    type: 'sequential',
    step: 2
  },
  { 
    title: 'Author Prompt Templates', 
    href: '/projects/augment-it/prompt-template-manager',
    type: 'sequential',
    step: 3
  },
  { 
    title: 'Choose AI Augmentation Option', 
    href: '/projects/augment-it/api-connector-service',
    type: 'sequential',
    step: 4
  },
  { 
    title: 'Review Request & Response', 
    href: '/projects/augment-it/request-reviewer',
    type: 'sequential',
    step: 5
  },
  { 
    title: 'Generate Insights', 
    href: '/projects/augment-it/highlight-collector',
    type: 'sequential',
    step: 6
  },
  { 
    title: 'Sync Back to Source', 
    href: '/projects/augment-it/sync',
    type: 'sequential',
    step: 7
  },
];

const currentArticle = {
  md: mdWorkflow,
  id: 'Augment-It/Specs/Data Augmentation Workflow with Microfrontends.md',
  title: 'Data Augmentation Workflow with Microfrontends',
};

// Remove YAML frontmatter when using ?raw imports so it doesn't render in the page
function stripFrontmatter(input: string): string {
  if (!input) return input;
  return input.replace(/^\uFEFF?\s*---[\s\S]*?\n---\s*/u, '');
}
const cleanedContent = stripFrontmatter(currentArticle.md);

// Define project covers for the gallery - each project individually configured
const projectCovers = [
  {
    id: 'augment-it',
    title: 'Augment-It',
    subtitle: 'Augment any data by importing records or connecting to data sources.',
    href: '/projects/augment-it',
    useCases: [
      {
        title: 'Product Insights for R&D',
        description: 'Generate insights about customers to inform product development decisions.',
        href: '/projects/augment-it/insights'
      },
      {
        title: 'Sales Intel, Just-in-Time',
        description: 'Equip outside sales teams with richer customer context before meetings.',
        href: '/projects/augment-it/templates'
      }
    ]
  },
  {
    id: 'ace-it',
    title: 'ACE-It',
    subtitle: 'AI-Augmented Product Development Workflow playbook and toolkit.',
    href: '/projects/ace-it',
    useCases: [
      {
        title: 'AI Co-Development',
        description: 'Practical playbook for building real products with AI as a co-developer.',
        href: '/projects/ace-it/philosophy'
      },
      {
        title: 'Battle-Tested Process',
        description: 'Accelerated Context Engineering (ACE) for seamless AI integration.',
        href: '/projects/ace-it/docs-kit'
      }
    ]
  },
  {
    id: 'astro-turf',
    title: 'Astro-Turf',
    subtitle: 'Advanced Astro framework components and patterns.',
    href: '/projects/astro-turf',
    useCases: [
      {
        title: 'Component Library',
        description: 'Reusable Astro components for modern web development.',
        href: '/projects/astro-turf/specs'
      },
      {
        title: 'Framework Patterns',
        description: 'Best practices and architectural patterns for Astro projects.',
        href: '/projects/astro-turf/patterns'
      }
    ]
  },
  {
    id: 'content-farm',
    title: 'Content-Farm',
    subtitle: 'Automated content generation and management system.',
    href: '/projects/content-farm',
    useCases: [
      {
        title: 'Content Automation',
        description: 'Streamlined workflows for content creation and publishing.',
        href: '/projects/content-farm/specs'
      },
      {
        title: 'Publishing Pipeline',
        description: 'Automated content distribution and management tools.',
        href: '/projects/content-farm/pipeline'
      }
    ]
  },
  {
    id: 'emergent-innovation',
    title: 'Emergent-Innovation',
    subtitle: 'Open source innovation projects and collaborative initiatives.',
    href: '/projects/emergent-innovation',
    useCases: [
      {
        title: 'Open Source Projects',
        description: 'Community-driven innovation in healthcare and technology.',
        href: '/projects/emergent-innovation/examples'
      },
      {
        title: 'Standards Development',
        description: 'Contributing to industry standards and best practices.',
        href: '/projects/emergent-innovation/standards'
      }
    ]
  },
  {
    id: 'water-template-ce',
    title: 'Water-Template-CE',
    subtitle: 'Community Edition water management and template system.',
    href: '/projects/water-template-ce',
    useCases: [
      {
        title: 'Template Engine',
        description: 'Flexible templating system for water management applications.',
        href: '/projects/water-template-ce/specs'
      },
      {
        title: 'Community Tools',
        description: 'Open source tools for water resource management.',
        href: '/projects/water-template-ce/community'
      }
    ]
  }
];
---

<Layout 
  title="Project Gallery" 
  description="Explore our innovative projects and interactive visualizations"
>
  <div class="projects-page-container">
    <AnimationWrapper>
      <Hero
        title="Project Gallery"
        subtitle="Innovation in Action"
        description="Discover our cutting-edge projects and interactive visualizations that showcase the power of modern web technologies and thoughtful design."
        alignment="center"
        fullBleed={false}
        animate={true}
        style="margin-top: 6rem;"
      />
    </AnimationWrapper>

    <!-- Project Gallery with Svelte -->
    <ProjectGallery projects={projectCovers} client:load />
    
    <!-- Hidden Augment-It Content for Injection -->
    <div id="augment-it-full-content" style="display: none;">
      <ContentSection_SidebarTreeVariantB steps={demoSteps} currentHref="/projects/gallery" seriesTitle="Augment-It">
        <article class="prose" style="color: var(--clr-body)">
          <h1>Augment-It</h1>
        </article>
        <OneArticle
          Component={OneArticleOnPage}
          content={cleanedContent}
          markdownFile={currentArticle.id}
          data={{ path: Astro.url.pathname, id: currentArticle.id, title: currentArticle.title }}
          title={currentArticle.title}
        />
      </ContentSection_SidebarTreeVariantB>
    </div>
  </div>
</Layout>

<style>
  .projects-page-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-6, 1.5rem);
    margin: 2rem auto;
    padding: 0 var(--spacing-4, 1rem);
    width: 100%;
  }
  
  .covers-grid { 
    display: grid; 
    gap: 2rem; 
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    max-width: 1200px;
    margin: 0 auto;
  }
  
  @media (max-width: 768px) {
    .covers-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
  }
</style>
