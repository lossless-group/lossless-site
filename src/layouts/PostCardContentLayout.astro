---
import { getCollection } from "astro:content";
import PostCardFeature from '../components/articles/PostCardFeature.astro';
import PostCard from '../components/articles/PostCard.astro';

const { contentThreads = [] } = Astro.props;
---

{/* Full-bleed Feature card */}
<div class="feature-card-container">
  <PostCardFeature {...contentThreads[0]} />
</div>

{/* Centered magazine container */}
<div class="magazine-container">
  {contentThreads.length > 1 && (
    <div class="magazine-grid">
      {contentThreads.slice(1).map((item) => (
        <PostCard 
          {...item} 
          imageAspectRatio="12/9" 
        />
      ))}
    </div>
  )}
</div>

<style>
  .feature-card-container {
    max-width: 80rem;
    width: 100%;
    margin: 0 auto;
    padding: 4rem 1.5rem;
  }

  .magazine-container {
    width: 100%;
    padding: 1rem 2rem;
    box-sizing: border-box;
  }
  
  .magazine-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3 columns on large screens */
    gap: 2rem;
    width: 100%;
    max-width: 120rem; /* ≈ 3 × max card width (e.g. 24rem) */
    margin: 0 auto;
    padding: 1rem;
    box-sizing: border-box;
  }

  @media (max-width: 1024px) {
    .magazine-grid {
      grid-template-columns: repeat(2, 1fr);
      max-width: 48rem;
    }
  }

  @media (max-width: 768px) {
    .magazine-grid {
      grid-template-columns: 1fr;
      max-width: 100%;
    }
  }
</style>
