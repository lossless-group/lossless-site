---
/**
 * StoryInlineCTA.astro
 * Inline sequence with per-step CTA cards and connecting indicators.
 * Props:
 * - heading?: string
 * - subheading?: string
 * - steps: { title, href, excerpt? }[]
 * - showIndex?: boolean
 */

export interface Step { title: string; href: string; excerpt?: string }
interface Props {
  heading?: string;
  subheading?: string;
  steps: Step[];
  showIndex?: boolean;
}

const { heading = 'Journey', subheading = '', steps = [], showIndex = true }: Props = Astro.props;
---

<section class="max-w-5xl mx-auto px-4 py-6">
  <header class="mb-6">
    <h2 class="text-2xl font-semibold" style="color: var(--text)">{heading}</h2>
    {subheading && <p class="text-sm mt-1" style="color: var(--muted-text)">{subheading}</p>}
  </header>

  <ol class="grid gap-4">
    {steps.map((s, i) => (
      <li class="rounded border p-4" style="background: var(--surface); border-color: var(--surface-2)">
        <div class="flex items-start gap-3">
          {showIndex && (
            <span class="shrink-0 inline-flex items-center justify-center w-7 h-7 rounded-full text-xs font-semibold" style="background: var(--accent); color: var(--accent-contrast)">
              {i + 1}
            </span>
          )}
          <div class="flex-1">
            <h3 class="text-lg font-medium" style="color: var(--text)">{s.title}</h3>
            {s.excerpt && <p class="text-sm mt-1" style="color: var(--muted-text)">{s.excerpt}</p>}
            <div class="mt-3">
              <a href={s.href} class="px-3 py-2 rounded text-sm" style="background: var(--accent); color: var(--accent-contrast)">Continue â†’</a>
            </div>
          </div>
        </div>
      </li>
    ))}
  </ol>
</section>
