---
/**
 * ReferenceNavRow.astro
 * 
 * Navigation row for the reference section, showing links to different reference types
 * and the total word count.
 * 
 * @component
 * @param {number} vocabularyCount - Number of vocabulary items
 * @param {number} conceptsCount - Number of concept items
 * @param {number} totalWords - Total word count across all reference items
 */

interface Props {
  vocabularyCount: number;
  conceptsCount: number;
  vocabularyWordCount: number;
  conceptsWordCount: number;
  currentPage?: 'all' | 'vocabulary' | 'concepts';
}

const { 
  vocabularyCount, 
  conceptsCount, 
  vocabularyWordCount,
  conceptsWordCount,
  currentPage = 'all'
} = Astro.props;

// Calculate total words for the current page
const currentPageWordCount = currentPage === 'all' 
  ? vocabularyWordCount + conceptsWordCount 
  : currentPage === 'vocabulary' 
    ? vocabularyWordCount 
    : conceptsWordCount;

const getButtonClass = (page: string) => {
  const baseClass = 'px-4 py-2 rounded-md flex items-center gap-2 transition-colors';
  const activeClass = 'bg-blue-600 text-white hover:bg-blue-700';
  const inactiveClass = 'bg-gray-700 text-white hover:bg-gray-600';
  
  return `${baseClass} ${currentPage === page ? activeClass : inactiveClass}`;
};

// Format large numbers with K/M suffixes
const formatCount = (count: number): string => {
  if (count >= 1000000) {
    return `${(count / 1000000).toFixed(1)}M+`;
  } else if (count >= 1000) {
    return `${(count / 1000).toFixed(1)}K+`;
  }
  return count.toString();
};
---

<div class="reference-nav-container">
  <div class="reference-nav-buttons">
    <a 
      href="/more-about" 
      class={getButtonClass('all')}
    >
      <span class="button-text">All Reference</span>
    </a>
    <a 
      href="/more-about/vocabulary" 
      class={getButtonClass('vocabulary')}
    >
      <span class="button-text">Vocabulary</span>
      <span class="count-badge">
        {vocabularyCount}
      </span>
    </a>
    <a 
      href="/more-about/concepts" 
      class={getButtonClass('concepts')}
    >
      <span class="button-text">Concepts</span>
      <span class="count-badge">
        {conceptsCount}
      </span>
    </a>
  </div>
  <div class="word-count">
    Words: {formatCount(currentPageWordCount)}
  </div>
</div>

<style>
  .reference-nav-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .reference-nav-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
  }

  .word-count {
    font-size: 0.875rem;
    color: rgb(156, 163, 175);
    font-weight: 500;
  }

  .button-text {
    white-space: nowrap;
  }

  .count-badge {
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
    background-color: rgba(255, 255, 255, 0.1);
    margin-left: 0.5rem;
  }

  /* Mobile responsiveness */
  @media (max-width: 768px) {
    .reference-nav-container {
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .reference-nav-buttons {
      gap: 0.375rem;
      flex-wrap: wrap;
      justify-content: flex-start;
    }

    .word-count {
      font-size: 0.8rem;
      order: -1; /* Move word count above buttons on mobile */
    }

    .count-badge {
      font-size: 0.7rem;
      padding: 0.1rem 0.4rem;
      margin-left: 0.375rem;
    }
  }

  @media (max-width: 480px) {
    .reference-nav-container {
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .reference-nav-buttons {
      gap: 0.25rem;
      flex-direction: column;
      align-items: stretch;
      width: 100%;
    }

    .reference-nav-buttons a {
      justify-content: center;
      text-align: center;
      padding: 0.75rem 1rem;
      font-size: 0.9rem;
    }

    .word-count {
      font-size: 0.75rem;
      text-align: center;
      order: -1;
    }

    .count-badge {
      font-size: 0.65rem;
      padding: 0.1rem 0.35rem;
      margin-left: 0.25rem;
    }
  }

  /* Very small screens - stack vertically with full width buttons */
  @media (max-width: 360px) {
    .reference-nav-buttons {
      gap: 0.5rem;
    }

    .reference-nav-buttons a {
      padding: 0.6rem 0.8rem;
      font-size: 0.85rem;
    }

    .word-count {
      font-size: 0.7rem;
    }
  }
</style>
